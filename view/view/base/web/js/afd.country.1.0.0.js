(()=>{"use strict";const n=n=>class extends n{resolver;connected;constructor(...n){super(...n),this.connected=new Promise((n=>{this.resolver=n}))}connectedCallback(){this.resolver()}whenConnected(){return this.connected}set visible(n){this.style.display=n?"block":"none"}},t={padding:{input:"0",item:"0.5rem 1rem",list:"0.25rem 0"},borderWidth:"1px",highlightedBorderWidth:"3px",borderRadius:{closed:"0.25rem",open:"0"},shadow:"0 2px 5px rgba(0, 0, 0, 0.15)",fontSize:"14px",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif',transitions:{borderRadius:"border-radius 0.2s ease",dropdown:"max-height 0.3s ease, opacity 0.2s ease"},highResFlags:!0,showFlags:!0},i={...t,colors:{background:"#ffffff",text:"#333333",border:"#cccccc",inputBackground:"#ffffff",hoverBackground:"#f0f0f0",highlightedBackground:"#f0f0f0",highlightedBorder:"#2272b9",focusBorder:"#2272b9",placeholder:"#999999",scrollbarThumb:"#cccccc",scrollbarTrack:"#f5f5f5"}},o={...t,colors:{background:"#173c67",text:"#ffffff",border:"#2272b9",inputBackground:"#0e2544",hoverBackground:"#2272b9",highlightedBackground:"#2272b9",highlightedBorder:"#3a8aca",focusBorder:"#3a8aca",placeholder:"#a0b4d0",scrollbarThumb:"#2272b9",scrollbarTrack:"#173c67"}},e=i,s={defaultCountry:"GB",loadCountriesImmediately:!0,fallbackToDefaultCountries:!0,pceURL:"https://apps.afd.co.uk/json",mostUsedCountries:0},r=(n,t)=>t.find((t=>t.iso2===n)),a={AFG:"AF",ALA:"AX",ALB:"AL",DZA:"DZ",ASM:"AS",AND:"AD",AGO:"AO",AIA:"AI",ATA:"AQ",ATG:"AG",ARG:"AR",ARM:"AM",ABW:"AW",AUS:"AU",AUT:"AT",AZE:"AZ",BHS:"BS",BHR:"BH",BGD:"BD",BRB:"BB",BLR:"BY",BEL:"BE",BLZ:"BZ",BEN:"BJ",BMU:"BM",BTN:"BT",BOL:"BO",BES:"BQ",BIH:"BA",BWA:"BW",BRA:"BR",IOT:"IO",BRN:"BN",BGR:"BG",BFA:"BF",BDI:"BI",KHM:"KH",CMR:"CM",CAN:"CA",CPV:"CV",CYM:"KY",CAF:"CF",TCD:"TD",CHL:"CL",CHN:"CN",CXR:"CX",CCK:"CC",COL:"CO",COM:"KM",COD:"CD",COG:"CG",COK:"CK",CRI:"CR",HRV:"HR",CUB:"CU",CUW:"CW",CYP:"CY",CZE:"CZ",CIV:"CI",DNK:"DK",DJI:"DJ",DOM:"DO",DMA:"DM",ECU:"EC",EGY:"EG",SLV:"SV",GNQ:"GQ",ERI:"ER",EST:"EE",ETH:"ET",FLK:"FK",FRO:"FO",FJI:"FJ",FIN:"FI",FRA:"FR",GUF:"GF",PYF:"PF",ATF:"TF",GAB:"GA",GMB:"GM",GEO:"GE",DEU:"DE",GHA:"GH",GIB:"GI",GRC:"GR",GRL:"GL",GRD:"GD",GLP:"GP",GTM:"GT",GNB:"GW",GIN:"GN",GUY:"GY",HTI:"HT",VAT:"VA",HND:"HN",HKG:"HK",HUN:"HU",ISL:"IS",IND:"IN",IDN:"ID",IRN:"IR",IRQ:"IQ",IRL:"IE",ISR:"IL",ITA:"IT",JAM:"JM",JPN:"JP",JOR:"JO",KAZ:"KZ",KEN:"KE",KIR:"KI",PRK:"KP",KOR:"KR",KWT:"KW",KGZ:"KG",LAO:"LA",LVA:"LV",LBN:"LB",LSO:"LS",LBR:"LR",LBY:"LY",LIE:"LI",LTU:"LT",LUX:"LU",MAC:"MO",MKD:"MK",MDG:"MG",MWI:"MW",MYS:"MY",MDV:"MV",MLI:"ML",MLT:"MT",MHL:"MH",MTQ:"MQ",MRT:"MR",MUS:"MU",MYT:"YT",MEX:"MX",FSM:"FM",MDA:"MD",MCO:"MC",MNG:"MN",MNE:"ME",MSR:"MS",MAR:"MA",MOZ:"MZ",MMR:"MM",NAM:"NA",NRU:"NR",NPL:"NP",NLD:"NL",NCL:"NC",NZL:"NZ",NIC:"NI",NGA:"NG",NER:"NE",NIU:"NU",NFK:"NF",MNP:"MP",NOR:"NO",OMN:"OM",PAK:"PK",PLW:"PW",PSE:"PS",PAN:"PA",PNG:"PG",PRY:"PY",PER:"PE",PHL:"PH",PCN:"PN",POL:"PL",PRT:"PT",PRI:"PR",QAT:"QA",SSD:"SS",ROU:"RO",RUS:"RU",RWA:"RW",REU:"RE",BLM:"BL",SHN:"SH",KNA:"KN",LCA:"LC",MAF:"MF",SPM:"PM",VCT:"VC",WSM:"WS",SMR:"SM",STP:"ST",SAU:"SA",SEN:"SN",SRB:"RS",SYC:"SC",SLE:"SL",SGP:"SG",SXM:"SX",SVK:"SK",SVN:"SI",SLB:"SB",SOM:"SO",ZAF:"ZA",SGS:"GS",ESP:"ES",LKA:"LK",SDN:"SD",SUR:"SR",SJM:"SJ",SWZ:"SZ",SWE:"SE",CHE:"CH",SYR:"SY",TWN:"TW",TJK:"TJ",TZA:"TZ",THA:"TH",TLS:"TL",TGO:"TG",TKL:"TK",TON:"TO",TTO:"TT",TUN:"TN",TUR:"TR",TKM:"TM",TCA:"TC",TUV:"TV",UGA:"UG",UKR:"UA",ARE:"AE",GBR:"GB",USA:"US",UMI:"UM",URY:"UY",UZB:"UZ",VUT:"VU",VEN:"VE",VNM:"VN",VGB:"VG",WLF:"WF",ESH:"EH",YEM:"YE",ZMB:"ZM",ZWE:"ZW",IMN:"IM",JEY:"JE",GGY:"GG",ANT:"AN"},d=async n=>{try{const{pceURL:t,mostUsedCountries:i}=n;if(console.log(`most used countries ${i}`),!t)throw new Error("PCE URL is required");const o=(n=>{const{serial:t,password:i,id:o,token:e}=n;if(t&&i&&o&&e)throw new Error("Both serial/password and id/token pairs should not be used together.");if(!(t||i||o||e))throw new Error("Either a combination of serial and password or id and token must be used.");if(t&&!i||!t&&i)throw new Error("Both serial and password must be supplied together.");if(o&&!e||!o&&e)throw new Error("Both id and token must be supplied together.");t&&i&&console.warn("Warning: Serial and password are for development purposes only.");const s=new URLSearchParams;return o&&e?(s.append("id",o),s.append("token",e)):t&&i&&(s.append("serial",t),s.append("password",i)),s.append("intf","alp010000"),s.append("format","json"),s})(n);o.append("task","listcountries"),o.append("data","list"),o.append("fields","standard"),i&&o.append("preferredCountries",i.toString());const e=await fetch(`${t}?${o.toString()}`);if(!e.ok)throw new Error(`Failed to fetch countries: ${e.statusText}`);const s=await e.json();if(!s||!s.Item||!Array.isArray(s.Item))throw new Error("Invalid response from AFD API");return s.Item.map((n=>{const t=n.iso||"GBR",i=(n=>a[n]||n)(t);return{name:n.name||"",iso2:i,iso3:t}}))}catch(n){return console.error("Error fetching countries:",n),[]}},h=[{name:"United Kingdom",iso2:"GB",iso3:"GBR"},{name:"United States",iso2:"US",iso3:"USA"},{name:"Canada",iso2:"CA",iso3:"CAN"},{name:"Australia",iso2:"AU",iso3:"AUS"}],p="/* Country flag sprite positions */\n.country-flag {\n  width: 16px;\n  height: 12px;\n  background-image: url('https://cdn.afd.co.uk/plugins/shared/25.3.0/flags.webp');\n  background-repeat: no-repeat;\n  display: inline-flex;\n}\n\n/* Country flag background positions */\n.iti__ac {\n  background-position: 0px 0;\n}\n.iti__ad {\n  background-position: -16px 0;\n}\n.iti__ae {\n  background-position: -32px 0;\n}\n.iti__af {\n  background-position: -48px 0;\n}\n.iti__ag {\n  background-position: -64px 0;\n}\n.iti__ai {\n  background-position: -80px 0;\n}\n.iti__al {\n  background-position: -96px 0;\n}\n.iti__am {\n  background-position: -112px 0;\n}\n.iti__ao {\n  background-position: -128px 0;\n}\n.iti__ar {\n  background-position: -144px 0;\n}\n.iti__as {\n  background-position: -160px 0;\n}\n.iti__at {\n  background-position: -176px 0;\n}\n.iti__au {\n  background-position: -192px 0;\n}\n.iti__aw {\n  background-position: -208px 0;\n}\n.iti__ax {\n  background-position: -224px 0;\n}\n.iti__az {\n  background-position: -240px 0;\n}\n.iti__ba {\n  background-position: -256px 0;\n}\n.iti__bb {\n  background-position: -272px 0;\n}\n.iti__bd {\n  background-position: -288px 0;\n}\n.iti__be {\n  background-position: -304px 0;\n}\n.iti__bf {\n  background-position: -320px 0;\n}\n.iti__bg {\n  background-position: -336px 0;\n}\n.iti__bh {\n  background-position: -352px 0;\n}\n.iti__bi {\n  background-position: -368px 0;\n}\n.iti__bj {\n  background-position: -384px 0;\n}\n.iti__bl {\n  background-position: -400px 0;\n}\n.iti__bm {\n  background-position: -416px 0;\n}\n.iti__bn {\n  background-position: -432px 0;\n}\n.iti__bo {\n  background-position: -448px 0;\n}\n.iti__bq {\n  background-position: -464px 0;\n}\n.iti__br {\n  background-position: -480px 0;\n}\n.iti__bs {\n  background-position: -496px 0;\n}\n.iti__bt {\n  background-position: -512px 0;\n}\n.iti__bw {\n  background-position: -528px 0;\n}\n.iti__by {\n  background-position: -544px 0;\n}\n.iti__bz {\n  background-position: -560px 0;\n}\n.iti__ca {\n  background-position: -576px 0;\n}\n.iti__cc {\n  background-position: -592px 0;\n}\n.iti__cd {\n  background-position: -608px 0;\n}\n.iti__cf {\n  background-position: -624px 0;\n}\n.iti__cg {\n  background-position: -640px 0;\n}\n.iti__ch {\n  background-position: -656px 0;\n}\n.iti__ci {\n  background-position: -672px 0;\n}\n.iti__ck {\n  background-position: -688px 0;\n}\n.iti__cl {\n  background-position: -704px 0;\n}\n.iti__cm {\n  background-position: -720px 0;\n}\n.iti__cn {\n  background-position: -736px 0;\n}\n.iti__co {\n  background-position: -752px 0;\n}\n.iti__cr {\n  background-position: -768px 0;\n}\n.iti__cu {\n  background-position: -784px 0;\n}\n.iti__cv {\n  background-position: -800px 0;\n}\n.iti__cw {\n  background-position: -816px 0;\n}\n.iti__cx {\n  background-position: -832px 0;\n}\n.iti__cy {\n  background-position: -848px 0;\n}\n.iti__cz {\n  background-position: -864px 0;\n}\n.iti__de {\n  background-position: -880px 0;\n}\n.iti__dj {\n  background-position: -896px 0;\n}\n.iti__dk {\n  background-position: -912px 0;\n}\n.iti__dm {\n  background-position: -928px 0;\n}\n.iti__do {\n  background-position: -944px 0;\n}\n.iti__dz {\n  background-position: -960px 0;\n}\n.iti__ec {\n  background-position: -976px 0;\n}\n.iti__ee {\n  background-position: -992px 0;\n}\n.iti__eg {\n  background-position: -1008px 0;\n}\n.iti__eh {\n  background-position: -1024px 0;\n}\n.iti__er {\n  background-position: -1040px 0;\n}\n.iti__es {\n  background-position: -1056px 0;\n}\n.iti__et {\n  background-position: -1072px 0;\n}\n.iti__fi {\n  background-position: -1088px 0;\n}\n.iti__fj {\n  background-position: -1104px 0;\n}\n.iti__fk {\n  background-position: -1120px 0;\n}\n.iti__fm {\n  background-position: -1136px 0;\n}\n.iti__fo {\n  background-position: -1152px 0;\n}\n.iti__fr {\n  background-position: -1168px 0;\n}\n.iti__ga {\n  background-position: -1184px 0;\n}\n.iti__gb {\n  background-position: -1200px 0;\n}\n.iti__gd {\n  background-position: -1216px 0;\n}\n.iti__ge {\n  background-position: -1232px 0;\n}\n.iti__gf {\n  background-position: -1248px 0;\n}\n.iti__gg {\n  background-position: -1264px 0;\n}\n.iti__gh {\n  background-position: -1280px 0;\n}\n.iti__gi {\n  background-position: -1296px 0;\n}\n.iti__gl {\n  background-position: -1312px 0;\n}\n.iti__gm {\n  background-position: -1328px 0;\n}\n.iti__gn {\n  background-position: -1344px 0;\n}\n.iti__gp {\n  background-position: -1360px 0;\n}\n.iti__gq {\n  background-position: -1376px 0;\n}\n.iti__gr {\n  background-position: -1392px 0;\n}\n.iti__gt {\n  background-position: -1408px 0;\n}\n.iti__gu {\n  background-position: -1424px 0;\n}\n.iti__gw {\n  background-position: -1440px 0;\n}\n.iti__gy {\n  background-position: -1456px 0;\n}\n.iti__hk {\n  background-position: -1472px 0;\n}\n.iti__hn {\n  background-position: -1488px 0;\n}\n.iti__hr {\n  background-position: -1504px 0;\n}\n.iti__ht {\n  background-position: -1520px 0;\n}\n.iti__hu {\n  background-position: -1536px 0;\n}\n.iti__id {\n  background-position: -1552px 0;\n}\n.iti__ie {\n  background-position: -1568px 0;\n}\n.iti__il {\n  background-position: -1584px 0;\n}\n.iti__im {\n  background-position: -1600px 0;\n}\n.iti__in {\n  background-position: -1616px 0;\n}\n.iti__io {\n  background-position: -1632px 0;\n}\n.iti__iq {\n  background-position: -1648px 0;\n}\n.iti__ir {\n  background-position: -1664px 0;\n}\n.iti__is {\n  background-position: -1680px 0;\n}\n.iti__it {\n  background-position: -1696px 0;\n}\n.iti__je {\n  background-position: -1712px 0;\n}\n.iti__jm {\n  background-position: -1728px 0;\n}\n.iti__jo {\n  background-position: -1744px 0;\n}\n.iti__jp {\n  background-position: -1760px 0;\n}\n.iti__ke {\n  background-position: -1776px 0;\n}\n.iti__kg {\n  background-position: -1792px 0;\n}\n.iti__kh {\n  background-position: -1808px 0;\n}\n.iti__ki {\n  background-position: -1824px 0;\n}\n.iti__km {\n  background-position: -1840px 0;\n}\n.iti__kn {\n  background-position: -1856px 0;\n}\n.iti__kp {\n  background-position: -1872px 0;\n}\n.iti__kr {\n  background-position: -1888px 0;\n}\n.iti__kw {\n  background-position: -1904px 0;\n}\n.iti__ky {\n  background-position: -1920px 0;\n}\n.iti__kz {\n  background-position: -1936px 0;\n}\n.iti__la {\n  background-position: -1952px 0;\n}\n.iti__lb {\n  background-position: -1968px 0;\n}\n.iti__lc {\n  background-position: -1984px 0;\n}\n.iti__li {\n  background-position: -2000px 0;\n}\n.iti__lk {\n  background-position: -2016px 0;\n}\n.iti__lr {\n  background-position: -2032px 0;\n}\n.iti__ls {\n  background-position: -2048px 0;\n}\n.iti__lt {\n  background-position: -2064px 0;\n}\n.iti__lu {\n  background-position: -2080px 0;\n}\n.iti__lv {\n  background-position: -2096px 0;\n}\n.iti__ly {\n  background-position: -2112px 0;\n}\n.iti__ma {\n  background-position: -2128px 0;\n}\n.iti__mc {\n  background-position: -2144px 0;\n}\n.iti__md {\n  background-position: -2160px 0;\n}\n.iti__me {\n  background-position: -2176px 0;\n}\n.iti__mf {\n  background-position: -2192px 0;\n}\n.iti__mg {\n  background-position: -2208px 0;\n}\n.iti__mh {\n  background-position: -2224px 0;\n}\n.iti__mk {\n  background-position: -2240px 0;\n}\n.iti__ml {\n  background-position: -2256px 0;\n}\n.iti__mm {\n  background-position: -2272px 0;\n}\n.iti__mn {\n  background-position: -2288px 0;\n}\n.iti__mo {\n  background-position: -2304px 0;\n}\n.iti__mp {\n  background-position: -2320px 0;\n}\n.iti__mq {\n  background-position: -2336px 0;\n}\n.iti__mr {\n  background-position: -2352px 0;\n}\n.iti__ms {\n  background-position: -2368px 0;\n}\n.iti__mt {\n  background-position: -2384px 0;\n}\n.iti__mu {\n  background-position: -2400px 0;\n}\n.iti__mv {\n  background-position: -2416px 0;\n}\n.iti__mw {\n  background-position: -2432px 0;\n}\n.iti__mx {\n  background-position: -2448px 0;\n}\n.iti__my {\n  background-position: -2464px 0;\n}\n.iti__mz {\n  background-position: -2480px 0;\n}\n.iti__na {\n  background-position: -2496px 0;\n}\n.iti__nc {\n  background-position: -2512px 0;\n}\n.iti__ne {\n  background-position: -2528px 0;\n}\n.iti__nf {\n  background-position: -2544px 0;\n}\n.iti__ng {\n  background-position: -2560px 0;\n}\n.iti__ni {\n  background-position: -2576px 0;\n}\n.iti__nl {\n  background-position: -2592px 0;\n}\n.iti__no {\n  background-position: -2608px 0;\n}\n.iti__np {\n  background-position: -2624px 0;\n}\n.iti__nr {\n  background-position: -2640px 0;\n}\n.iti__nu {\n  background-position: -2656px 0;\n}\n.iti__nz {\n  background-position: -2672px 0;\n}\n.iti__om {\n  background-position: -2688px 0;\n}\n.iti__pa {\n  background-position: -2704px 0;\n}\n.iti__pe {\n  background-position: -2720px 0;\n}\n.iti__pf {\n  background-position: -2736px 0;\n}\n.iti__pg {\n  background-position: -2752px 0;\n}\n.iti__ph {\n  background-position: -2768px 0;\n}\n.iti__pk {\n  background-position: -2784px 0;\n}\n.iti__pl {\n  background-position: -2800px 0;\n}\n.iti__pm {\n  background-position: -2816px 0;\n}\n.iti__pr {\n  background-position: -2832px 0;\n}\n.iti__ps {\n  background-position: -2848px 0;\n}\n.iti__pt {\n  background-position: -2864px 0;\n}\n.iti__pw {\n  background-position: -2880px 0;\n}\n.iti__py {\n  background-position: -2896px 0;\n}\n.iti__qa {\n  background-position: -2912px 0;\n}\n.iti__re {\n  background-position: -2928px 0;\n}\n.iti__ro {\n  background-position: -2944px 0;\n}\n.iti__rs {\n  background-position: -2960px 0;\n}\n.iti__ru {\n  background-position: -2976px 0;\n}\n.iti__rw {\n  background-position: -2992px 0;\n}\n.iti__sa {\n  background-position: -3008px 0;\n}\n.iti__sb {\n  background-position: -3024px 0;\n}\n.iti__sc {\n  background-position: -3040px 0;\n}\n.iti__sd {\n  background-position: -3056px 0;\n}\n.iti__se {\n  background-position: -3072px 0;\n}\n.iti__sg {\n  background-position: -3088px 0;\n}\n.iti__sh {\n  background-position: -3104px 0;\n}\n.iti__si {\n  background-position: -3120px 0;\n}\n.iti__sj {\n  background-position: -3136px 0;\n}\n.iti__sk {\n  background-position: -3152px 0;\n}\n.iti__sl {\n  background-position: -3168px 0;\n}\n.iti__sm {\n  background-position: -3184px 0;\n}\n.iti__sn {\n  background-position: -3200px 0;\n}\n.iti__so {\n  background-position: -3216px 0;\n}\n.iti__sr {\n  background-position: -3232px 0;\n}\n.iti__ss {\n  background-position: -3248px 0;\n}\n.iti__st {\n  background-position: -3264px 0;\n}\n.iti__sv {\n  background-position: -3280px 0;\n}\n.iti__sx {\n  background-position: -3296px 0;\n}\n.iti__sy {\n  background-position: -3312px 0;\n}\n.iti__sz {\n  background-position: -3328px 0;\n}\n.iti__tc {\n  background-position: -3344px 0;\n}\n.iti__td {\n  background-position: -3360px 0;\n}\n.iti__tg {\n  background-position: -3376px 0;\n}\n.iti__th {\n  background-position: -3392px 0;\n}\n.iti__tj {\n  background-position: -3408px 0;\n}\n.iti__tk {\n  background-position: -3424px 0;\n}\n.iti__tl {\n  background-position: -3440px 0;\n}\n.iti__tm {\n  background-position: -3456px 0;\n}\n.iti__tn {\n  background-position: -3472px 0;\n}\n.iti__to {\n  background-position: -3488px 0;\n}\n.iti__tr {\n  background-position: -3504px 0;\n}\n.iti__tt {\n  background-position: -3520px 0;\n}\n.iti__tv {\n  background-position: -3536px 0;\n}\n.iti__tw {\n  background-position: -3552px 0;\n}\n.iti__tz {\n  background-position: -3568px 0;\n}\n.iti__ua {\n  background-position: -3584px 0;\n}\n.iti__ug {\n  background-position: -3600px 0;\n}\n.iti__us {\n  background-position: -3616px 0;\n}\n.iti__uy {\n  background-position: -3632px 0;\n}\n.iti__uz {\n  background-position: -3648px 0;\n}\n.iti__va {\n  background-position: -3664px 0;\n}\n.iti__vc {\n  background-position: -3680px 0;\n}\n.iti__ve {\n  background-position: -3696px 0;\n}\n.iti__vg {\n  background-position: -3712px 0;\n}\n.iti__vi {\n  background-position: -3728px 0;\n}\n.iti__vn {\n  background-position: -3744px 0;\n}\n.iti__vu {\n  background-position: -3760px 0;\n}\n.iti__wf {\n  background-position: -3776px 0;\n}\n.iti__ws {\n  background-position: -3792px 0;\n}\n.iti__xk {\n  background-position: -3808px 0;\n}\n.iti__ye {\n  background-position: -3824px 0;\n}\n.iti__yt {\n  background-position: -3840px 0;\n}\n.iti__za {\n  background-position: -3856px 0;\n}\n.iti__zm {\n  background-position: -3872px 0;\n}\n.iti__zw {\n  background-position: -3888px 0;\n}\n";function c(n,t,i,o=!1){const e=new CustomEvent(t,{bubbles:!0,composed:!0,cancelable:o,detail:i});return n.dispatchEvent(e)}class u extends(n(HTMLElement)){_value="GB";_countries=[];_isDropdownVisible=!1;_isLoading=!1;_countriesLoaded=!1;_dropdown=null;_flagBox=null;_countryInput=null;_countryList=null;_onChangeCallback=null;_options={...s};_defaultCountry="GB";_disabledCountries=[];_enabledCountries=[];_themeOptions=e;static get observedAttributes(){return["value","placeholder"]}constructor(){super(),this._countries=[],this.attachShadow({mode:"open"}),this._value||(this._value=this._defaultCountry)}async connectedCallback(){super.connectedCallback(),this.setAttribute("role","combobox"),this.setAttribute("aria-haspopup","listbox"),this.setAttribute("aria-expanded","false"),this.setAttribute("aria-label","Country selector"),this.hasAttribute("tabindex")||this.setAttribute("tabindex","0"),this.render(),this.setupEventListeners(),c(this,"country-init",{component:this,success:!0})}attributeChangedCallback(n,t,i){t!==i&&"value"===n&&i&&(this.value=i)}get value(){return this._value}set value(n){if(this._value===n)return;const t=n||"GB";if(this.isCountryDisabled(t))return void console.warn(`Country ${t} is disabled or not enabled and cannot be selected.`);const i=this._value;this._value=t,this.setAttribute("value",n||""),this.updateSelectedCountryDisplay(),this._onChangeCallback&&this._onChangeCallback(this._value);const o=new CustomEvent("change",{bubbles:!0,composed:!0,detail:{value:this._value,oldValue:i,country:this._countries.find((n=>n.iso2===this._value))}});this.dispatchEvent(o)}set onChange(n){this._onChangeCallback=n}_customLightTheme=null;_customDarkTheme=null;mergeThemeOptions(n,t){return{...n,...t,colors:{...n.colors,...t.colors||{}},padding:{...n.padding,...t.padding||{}},borderRadius:{...n.borderRadius,...t.borderRadius||{}},transitions:{...n.transitions,...t.transitions||{}}}}get options(){return this._options}set options(n){if("object"!=typeof n||null===n)return;this._options={...this._options,...n},n.defaultCountry&&this._defaultCountry!==n.defaultCountry&&(this._defaultCountry=n.defaultCountry,this.value=n.defaultCountry);let t="light",e=!0,s=!1,r=this._themeOptions.highResFlags,a=this._themeOptions.showFlags;if(n.lightTheme&&(this._customLightTheme=this.mergeThemeOptions(i,n.lightTheme)),n.darkTheme&&(this._customDarkTheme=this.mergeThemeOptions(o,n.darkTheme)),n.theme&&(t=n.theme),"boolean"==typeof n.animations&&(e=n.animations),"boolean"==typeof n.showISO&&(s=n.showISO),"boolean"==typeof n.highResFlags&&(r=n.highResFlags),"boolean"==typeof n.showFlags&&(a=n.showFlags),Array.isArray(n.disabledCountries)&&(this._disabledCountries=n.disabledCountries,this._countryList&&this._countries.length>0)){const n=this.filterCountries(this._countries);this._countryList.countries=n}if(Array.isArray(n.enabledCountries)&&(this._enabledCountries=n.enabledCountries,this._countryList&&this._countries.length>0)){const n=this.filterCountries(this._countries);this._countryList.countries=n}if("light"===t?this._themeOptions=this._customLightTheme||i:"dark"===t&&(this._themeOptions=this._customDarkTheme||o),n.themeOptions&&(this._themeOptions=this.mergeThemeOptions(this._themeOptions,n.themeOptions)),this._themeOptions.highResFlags=r,this._themeOptions.showFlags=a,this.applyTheme(e),this._countryList&&(this._countryList.showISO=s),n.countries&&n.countries.length>0){this._countries=[...n.countries],this._countriesLoaded=!0;const t=this.filterCountries(this._countries);this._countryList&&(this._countryList.countries=t),c(this,"country-load",{component:this,countries:this._countries,success:!0})}else{const t=!1!==n.loadCountriesImmediately;n.pceURL&&t&&this.loadCountries()}}async fetchAndUpdateCountries(){if(this._options&&this._options.countries&&this._options.countries.length>0){this._countries=[...this._options.countries],this._countriesLoaded=!0;const n=this.filterCountries(this._countries);return this._countryList&&(this._countryList.countries=n),c(this,"country-load",{component:this,countries:this._countries,success:!0}),this._isLoading=!1,this.updateLoadingState(),!0}if(!this._options||!this._options.pceURL)return!1;this._isLoading=!0,this.updateLoadingState();try{const n=await d(this._options);if(n&&n.length>0){this._countries=n,this._countriesLoaded=!0;const t=this.filterCountries(n);return this._countryList&&(this._countryList.countries=t),c(this,"country-load",{component:this,countries:n,success:!0}),this._isLoading=!1,this.updateLoadingState(),!0}throw new Error("No countries returned from API")}catch(n){if(console.error("Error fetching countries:",n),!1!==this._options.fallbackToDefaultCountries){this._countries=[...h],this._countriesLoaded=!0;const n=this.filterCountries(h);this._countryList&&(this._countryList.countries=n)}return c(this,"country-load",{component:this,countries:this._countries,success:!1,error:n instanceof Error?n.message:String(n)}),this._isLoading=!1,this.updateLoadingState(),!1}}updateLoadingState(){this._countryInput&&(this._isLoading?(this._countryInput.classList.add("loading"),this._countryInput.disabled=!0,c(this,"loading-start",{component:this,isLoading:!0})):(this._countryInput.classList.remove("loading"),this._countryInput.disabled=!1,c(this,"loading-end",{component:this,isLoading:!1})))}async loadCountries(){return!(!this._countriesLoaded&&!this._isLoading)||this.fetchAndUpdateCountries()}get countryISO(){if(!this._value){const n=r(this._defaultCountry,this._countries)||h.find((n=>n.iso2===this._defaultCountry));return n?n.iso3:this._defaultCountry}const n=r(this._value,this._countries);return n?n.iso3:this._value}isCountryDisabled(n){return this._enabledCountries.length>0?!this._enabledCountries.includes(n):this._disabledCountries.includes(n)}filterCountries(n){return this._enabledCountries.length>0?n.filter((n=>this._enabledCountries.includes(n.iso2))):this._disabledCountries.length>0?n.filter((n=>!this._disabledCountries.includes(n.iso2))):n}render(){if(!this.shadowRoot)return;for(;this.shadowRoot.firstChild;)this.shadowRoot.removeChild(this.shadowRoot.firstChild);const n=document.createElement("style");n.textContent=`/* Base component styles */\n:host {\n  display: block;\n  position: relative;\n}\n\n/* Layout styles */\n.country-input-container {\n  display: flex;\n  align-items: center;\n  border: 1px solid #ccc;\n  overflow: hidden;\n}\n\n.country-input-container:focus-within {\n  border-color: #03a29a;\n  box-shadow: 0 0 0 2px rgba(3, 162, 154, 0.2);\n}\n\n.country-input {\n  flex: 1;\n  padding: 8px 12px;\n  border: none;\n  outline: none;\n  font-size: 16px;\n  font-family: inherit;\n  color: inherit;\n  background: transparent;\n}\n\n.flag-box {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 38px;\n  height: 38px;\n  border-right: 1px solid #ccc;\n  cursor: pointer;\n}\n\n.country-flag {\n  width: 16px;\n  height: 12px;\n  background-image: url('https://cdn.afd.co.uk/plugins/shared/25.3.0/flags.webp');\n  background-repeat: no-repeat;\n  display: inline-flex;\n}\n\n.country-input:focus {\n  outline: none;\n}\n\n.dropdown {\n  position: absolute;\n  top: 100%;\n  left: 0;\n  right: 0;\n  overflow-y: auto;\n  z-index: 1000;\n  display: none;\n}\n\n.dropdown.show {\n  display: block;\n}\n\n.search-input {\n  width: 100%;\n  padding: 8px 12px;\n  border: none;\n  border-bottom: 1px solid #eee;\n  font-size: 14px;\n  box-sizing: border-box;\n}\n\n.search-input:focus {\n  outline: none;\n  border-bottom-color: #03a29a;\n}\n\n/* These styles are not theme-related and should remain */\n.country-list {\n  list-style: none;\n  margin: 0;\n  padding: 0;\n}\n\n.country-list-section {\n  padding: 8px 0;\n}\n\n.country-name {\n  flex: 1;\n}\n\n/* Loading indicator styles */\n.loading {\n  padding: 12px;\n  text-align: center;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 8px;\n}\n\n.loading-spinner {\n  display: inline-block;\n  width: 20px;\n  height: 20px;\n  border: 2px solid #f3f3f3; /* Light grey border */\n  border-top: 2px solid #2272b9; /* AFD blue border on top to create the spinner effect */\n  border-radius: 50%;\n  animation: spin 1s ease-in-out infinite;\n}\n\n@keyframes spin {\n  to {\n    transform: rotate(360deg);\n  }\n}\n \n\n ${p}`,this.shadowRoot.appendChild(n);const t=document.createElement("div");t.className="sr-only",t.textContent="Use arrow keys to navigate countries. Press Enter to select a country.",this.shadowRoot.appendChild(t);const i=document.createElement("div");i.className="sr-only",i.setAttribute("aria-live","polite"),i.setAttribute("aria-atomic","true"),this.shadowRoot.appendChild(i);const o=document.createElement("style");o.textContent="\n      .sr-only {\n        position: absolute;\n        width: 1px;\n        height: 1px;\n        padding: 0;\n        margin: -1px;\n        overflow: hidden;\n        clip: rect(0, 0, 0, 0);\n        white-space: nowrap;\n        border: 0;\n      }\n    ",this.shadowRoot.appendChild(o);const e=document.createElement("div");e.className="country-input-container";const s=document.createElement("div");s.className="flag-box",s.id="flag-box",this.createFlagElement(s,this._value);const r=document.createElement("input");r.autocomplete="new-password",r.type="text",r.className="country-input",r.id="country-input",r.placeholder="Search for a country",r.value=this.getSelectedCountryText(),e.appendChild(s),e.appendChild(r);const a=document.createElement("div");a.className="dropdown",a.id="dropdown";const d=document.createElement("afd-country-list"),h=`country-list-${this.id||Math.random().toString(36).substring(2,9)}`;if(d.id=h,this.setAttribute("aria-controls",h),d.setAttribute("role","listbox"),d.setAttribute("aria-label","Countries"),a.appendChild(d),this.shadowRoot.appendChild(e),this.shadowRoot.appendChild(a),this._dropdown=a,this._flagBox=s,this._countryInput=r,this._countryList=d,this._countryList){this._countryList.countries=this._countries,this._countryList.selectedCountry=this._value;const n=void 0!==this._options?.showISO&&this._options.showISO;this._countryList.showISO=n;const t=this.filterCountries(this._countries);this._countryList.countries=t,this._countryList.onSelect=this.handleCountrySelect.bind(this)}const c=void 0===this._options?.animations||this._options.animations;this.applyTheme(c),this.updateBorderRadius()}setupEventListeners(){const n=this.shadowRoot?.getElementById("country-input");this.addEventListener("keydown",(n=>{" "===n.key||"Space"===n.key?(n.preventDefault(),this._isDropdownVisible?this.closeDropdown():this.openDropdown()):"Escape"===n.key&&this.closeDropdown()})),n?.addEventListener("focus",(async()=>{n.value="",this._countryList&&(this._countryList.searchTerm=""),await this.openDropdown()})),n?.addEventListener("input",(n=>{const t=n.target.value;this._countryList&&(this._countryList.searchTerm=t,this._countryList.resetHighlightToFirst())})),this._flagBox?.addEventListener("click",(async()=>{this._isDropdownVisible?this.closeDropdown():(await this.openDropdown(),n?.focus())})),document.addEventListener("click",(n=>{this.contains(n.target)||this.closeDropdown()})),n?.addEventListener("keydown",(n=>{"Escape"===n.key?this.closeDropdown():"ArrowDown"===n.key||"ArrowUp"===n.key?(n.preventDefault(),this._countryList&&this._countryList.navigateList("ArrowDown"===n.key?1:-1)):"Enter"===n.key&&(n.preventDefault(),this._countryList&&(this._countryList.selectHighlighted(),this.closeDropdown()))}))}handleCountrySelect(n){c(this,"country-select",{component:this,country:n,previousCountry:this._countries.find((n=>n.iso2===this._value))},!0)&&(this.value=n.iso2,this._countryInput&&(this._countryInput.value=n.name),this.closeDropdown())}async openDropdown(){this._countriesLoaded||this._isLoading||this.loadCountries(),this.setAttribute("aria-expanded","true");if(!c(this,"country-open",{component:this,selectedCountry:this._value?this._countries.find((n=>n.iso2===this._value)):void 0},!0))return!1;this._isDropdownVisible=!0;const n=void 0===this._options?.animations||this._options.animations;this.applyTheme(n),this.updateBorderRadius();const t=this._dropdown?.querySelector("input");return t&&t.focus(),!0}closeDropdown(){if(!this._isDropdownVisible)return!0;this.setAttribute("aria-expanded","false"),this.hasAttribute("aria-activedescendant")&&this.removeAttribute("aria-activedescendant");if(!c(this,"country-close",{component:this,selectedCountry:this._value?this._countries.find((n=>n.iso2===this._value)):void 0},!0))return!1;this._isDropdownVisible=!1;const n=void 0===this._options?.animations||this._options.animations;return this.applyTheme(n),this.updateBorderRadius(),!0}updateBorderRadius(){if(!this.shadowRoot||!this._dropdown)return;const n=this._isDropdownVisible?this._themeOptions.borderRadius.open:this._themeOptions.borderRadius.closed,t=this.shadowRoot.querySelector(".country-input-container");t&&(t.style.borderRadius=n)}applyTheme(n=!0){if(!this.shadowRoot)return;let t=this.shadowRoot.querySelector("#theme-style");t||(t=document.createElement("style"),t.id="theme-style",this.shadowRoot.appendChild(t));const i=void 0===this._themeOptions.showFlags||this._themeOptions.showFlags;t.textContent=`\n      .country-input-container {\n        background-color: ${this._themeOptions.colors.inputBackground};\n        border: ${this._themeOptions.borderWidth} solid ${this._themeOptions.colors.border};\n        padding: ${this._themeOptions.padding.input};\n        font-family: ${this._themeOptions.fontFamily};\n        font-size: ${this._themeOptions.fontSize};\n        ${n?`transition: ${this._themeOptions.transitions.borderRadius};`:""}\n      }\n\n      /* Styles for when flags are hidden */\n      .no-flags {\n        display: ${i?"flex":"none"};\n        width: ${i?"auto":"0"};\n        margin-right: ${i?"0.5rem":"0"};\n      }\n\n      .country-input-container.no-flags {\n        padding-left: ${i?"inherit":"0.75rem"};\n      }\n\n      .country-input-container:focus-within {\n        border-color: ${this._themeOptions.colors.focusBorder};\n      }\n\n      .country-input {\n        color: ${this._themeOptions.colors.text};\n        background-color: ${this._themeOptions.colors.inputBackground};\n        font-family: ${this._themeOptions.fontFamily};\n        font-size: ${this._themeOptions.fontSize};\n      }\n\n      .country-input::placeholder {\n        color: ${this._themeOptions.colors.placeholder};\n      }\n\n      .dropdown {\n        background-color: ${this._themeOptions.colors.background};\n        border: ${this._themeOptions.borderWidth} solid ${this._themeOptions.colors.border};\n        border-top: none;\n        box-shadow: ${this._themeOptions.shadow};\n        display: ${this._isDropdownVisible?"block":"none"};\n        ${n?`\n          transition: ${this._themeOptions.transitions.dropdown};\n          max-height: ${this._isDropdownVisible?"300px":"0"};\n          opacity: ${this._isDropdownVisible?"1":"0"};\n          overflow: ${this._isDropdownVisible?"visible":"hidden"};\n        `:`\n          max-height: ${this._isDropdownVisible?"300px":"0"};\n          opacity: ${this._isDropdownVisible?"1":"0"};\n          overflow: ${this._isDropdownVisible?"visible":"hidden"};\n        `}\n      }\n\n      .country-list-container {\n        background-color: ${this._themeOptions.colors.background};\n        padding: ${this._themeOptions.padding.list};\n      }\n\n      .country-list-container::-webkit-scrollbar-thumb {\n        background-color: ${this._themeOptions.colors.scrollbarThumb};\n      }\n\n      .country-list-container::-webkit-scrollbar-track {\n        background-color: ${this._themeOptions.colors.scrollbarTrack};\n      }\n    `,this._countryList&&(this._countryList.themeOptions=this._themeOptions,this._countryList.animations=n)}createFlagElement(n,t){if(void 0!==this._themeOptions.showFlags&&!this._themeOptions.showFlags)return void n.classList.add("no-flags");const i=document.createElement("div");if(t){const n=t.toLowerCase();if(i.classList.add("country-flag",`iti__${n}`),(void 0===this._themeOptions.highResFlags||this._themeOptions.highResFlags)&&!document.getElementById("high-res-flags-style")){const n=document.createElement("style");n.id="high-res-flags-style",n.textContent="\n          @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {\n            .country-flag {\n              background-image: url('https://cdn.afd.co.uk/plugins/shared/25.3.0/flags@2x.webp') !important;\n            }\n          }\n        ",document.head.appendChild(n)}i.style.backgroundImage="url('https://cdn.afd.co.uk/plugins/shared/25.3.0/flags.webp')"}else i.style.width="16px",i.style.height="12px",i.style.backgroundColor="#ddd";n.appendChild(i)}getSelectedCountryText(){if(!this._value)return"Select a country";const n=r(this._value,this._countries)||h.find((n=>n.iso2===this._value));return n?n.name:this._value}updateSelectedCountryDisplay(){if(this._flagBox){for(;this._flagBox.firstChild;)this._flagBox.removeChild(this._flagBox.firstChild);this.createFlagElement(this._flagBox,this._value)}this._countryInput&&(this._countryInput.value=this.getSelectedCountryText())}}customElements.define("afd-country-input",u);class l extends(n(HTMLElement)){_country=null;_highlighted=!1;_onClick=null;_showISO=!1;_showFlags=!0;_themeOptions=e;_animations=!0;static get observedAttributes(){return["highlighted","show-ISO","show-flags"]}constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){super.connectedCallback(),this.render(),this.setupEventListeners()}attributeChangedCallback(n,t,i){t!==i&&("highlighted"===n?(this._highlighted=null!==i,this.render()):"show-ISO"===n?(this._showISO=null!==i,this.render()):"show-flags"===n&&(this._showFlags=null!==i,this.render()))}get country(){return this._country}set country(n){this._country=n,this.render()}get highlighted(){return this._highlighted}get showISO(){return this._showISO}set showISO(n){if(this._showISO!==n){if(this._showISO=n,n?this.setAttribute("show-ISO",""):this.removeAttribute("show-ISO"),this.shadowRoot){const t=this.shadowRoot.querySelector(".country-code");if(t)return void(t.style.display=n?"block":"none")}this.render()}}get showFlags(){return this._showFlags}set showFlags(n){if(this._showFlags!==n){if(this._showFlags=n,n?this.setAttribute("show-flags",""):this.removeAttribute("show-flags"),this.shadowRoot){const t=this.shadowRoot.querySelector(".country-flag");if(t)return void(t.style.display=n?"block":"none")}this.render()}}get themeOptions(){return this._themeOptions}set themeOptions(n){this._themeOptions={...this._themeOptions,...n,padding:{...this._themeOptions.padding,...n.padding||{}},borderRadius:{...this._themeOptions.borderRadius,...n.borderRadius||{}},transitions:{...this._themeOptions.transitions,...n.transitions||{}}},this.applyTheme()}get animations(){return this._animations}set animations(n){this._animations=n}set highlighted(n){if(this._highlighted!==n){if(this._highlighted=n,n?this.setAttribute("highlighted",""):this.removeAttribute("highlighted"),this.shadowRoot){const t=this.shadowRoot.querySelector(".country-item");if(t)return n?t.classList.add("highlighted"):t.classList.remove("highlighted"),void t.setAttribute("aria-selected",n?"true":"false")}this.render()}}set onClick(n){this._onClick=n}setupEventListeners(){this.addEventListener("click",this.handleClick.bind(this)),this.addEventListener("mouseenter",(()=>{this.highlighted=!0})),this.addEventListener("mouseleave",(()=>{this.highlighted=!1})),document.addEventListener("keyboard-navigation",(()=>{this.highlighted=!1}))}handleClick(){this._country&&this._onClick&&this._onClick(this._country)}applyTheme(){if(!this.shadowRoot)return;let n=this.shadowRoot.querySelector("#theme-style");n||(n=document.createElement("style"),n.id="theme-style",this.shadowRoot.appendChild(n));const t=void 0===this._themeOptions.highResFlags||this._themeOptions.highResFlags;n.textContent=`\n      .country-item {\n        color: ${this._themeOptions.colors.text};\n        background-color: ${this._themeOptions.colors.background};\n        padding: ${this._themeOptions.padding.item};\n        font-family: ${this._themeOptions.fontFamily};\n        font-size: ${this._themeOptions.fontSize};\n        ${this._animations?"transition: background-color 0.2s ease;":""}\n      }\n\n      .country-item:hover {\n        background-color: ${this._themeOptions.colors.hoverBackground};\n      }\n\n      .country-item.highlighted {\n        background-color: ${this._themeOptions.colors.highlightedBackground};\n        border-left: ${this._themeOptions.highlightedBorderWidth} solid ${this._themeOptions.colors.highlightedBorder};\n      }\n\n      .country-name {\n        color: ${this._themeOptions.colors.text};\n      }\n\n      .country-code {\n        color: ${this._themeOptions.colors.placeholder};\n      }\n\n      .country-flag {\n        background-image: url('https://cdn.afd.co.uk/plugins/shared/25.3.0/flags.webp');\n      }\n\n      ${t?"\n      @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {\n        .country-flag {\n          background-image: url('https://cdn.afd.co.uk/plugins/shared/25.3.0/flags@2x.webp');\n        }\n      }\n      ":""}\n\n      /* No item animations to avoid flashing */\n    `}render(){if(!this.shadowRoot||!this._country)return;for(;this.shadowRoot.firstChild;)this.shadowRoot.removeChild(this.shadowRoot.firstChild);const n=document.createElement("style");n.textContent=`:host {\n  display: block;\n  cursor: pointer;\n}\n\n/* Layout styles */\n.country-item {\n  display: flex;\n  align-items: center;\n}\n\n/* Non-highlighted country item */\n.country-item:not(.highlighted) {\n  border-left: none;\n}\n\n/* Flag spacing */\n.country-flag {\n  margin-right: 8px;\n}\n\n/* Country name element */\n.country-name {\n  flex: 1;\n}\n\n/* Country code element */\n.country-code {\n  font-size: 12px;\n  margin-left: 8px;\n}\n \n\n ${p}`,this.shadowRoot.appendChild(n);const t=document.createElement("div");if(t.classList.add("country-item"),t.setAttribute("role","option"),t.setAttribute("aria-selected",this._highlighted?"true":"false"),this._highlighted&&t.classList.add("highlighted"),this._showFlags){const n=document.createElement("div");n.classList.add("country-flag",`iti__${this._country.iso2.toLowerCase()}`),t.appendChild(n)}const i=document.createElement("span");i.classList.add("country-name"),i.textContent=this._country.name,t.appendChild(i);const o=document.createElement("span");o.classList.add("country-code"),o.textContent=this._country.iso2,o.style.display=this._showISO?"block":"none",t.appendChild(o),this.shadowRoot.appendChild(t),this.applyTheme()}}customElements.define("afd-country-list-item",l);class _ extends(n(HTMLElement)){_countries=[];_filteredCountries=[];_selectedCountry="";_highlightedIndex=-1;_onSelectCallback=null;_showISO=!1;_themeOptions=e;_animations=!0;_isLoading=!0;get highlightedIndex(){return this._highlightedIndex}constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){super.connectedCallback(),this.setAttribute("role","listbox"),this.setAttribute("aria-label","Country list"),this.id||(this.id=`country-list-${Math.random().toString(36).substring(2,9)}`),this.render()}get countries(){return this._countries}set countries(n){this._countries=n,this._filteredCountries=[...n],this._isLoading=!1,this.render(),this.updateCountryItems()}get selectedCountry(){return this._selectedCountry}set selectedCountry(n){this._selectedCountry=n,this.updateSelectedState()}set onSelect(n){this._onSelectCallback=n}set searchTerm(n){this.filterCountries(n)}get filteredCountries(){return this._filteredCountries}get showISO(){return this._showISO}set showISO(n){this._showISO=n,this.updateCountryItems()}get themeOptions(){return this._themeOptions}set themeOptions(n){this._themeOptions={...this._themeOptions,...n,padding:{...this._themeOptions.padding,...n.padding||{}},borderRadius:{...this._themeOptions.borderRadius,...n.borderRadius||{}},transitions:{...this._themeOptions.transitions,...n.transitions||{}}},this.applyTheme()}get animations(){return this._animations}set animations(n){if(this._animations=n,this.shadowRoot){const t=this.shadowRoot.querySelector(".country-list-container");t&&(n?t.classList.add("animated"):t.classList.remove("animated"))}this.applyTheme()}navigateList(n){0!==this._filteredCountries.length&&(c(this,"keyboard-navigation",{bubbles:!0,composed:!0}),-1===this._highlightedIndex?this._highlightedIndex=n>0?0:this._filteredCountries.length-1:(this._highlightedIndex+=n,this._highlightedIndex<0?this._highlightedIndex=this._filteredCountries.length-1:this._highlightedIndex>=this._filteredCountries.length&&(this._highlightedIndex=0)),this.updateHighlightedItem(),this._highlightedIndex>=0&&this._highlightedIndex<this._filteredCountries.length)&&c(this,"country-keyboard-navigate",{component:this,country:this._filteredCountries[this._highlightedIndex],index:this._highlightedIndex,direction:n})}updateHighlightedItem(){const n=this.shadowRoot?.querySelectorAll("afd-country-list-item");if(n&&(n.forEach((n=>{n.highlighted=!1})),this._highlightedIndex>=0&&this._highlightedIndex<n.length)){const t=n[this._highlightedIndex];t.highlighted=!0,t.scrollIntoView({block:"nearest"})}}selectHighlighted(){this._highlightedIndex>=0&&this._highlightedIndex<this._filteredCountries.length?this.selectCountry(this._filteredCountries[this._highlightedIndex]):this._filteredCountries.length>0&&this.selectCountry(this._filteredCountries[0])}resetHighlightToFirst(){this._filteredCountries.length>0?(this._highlightedIndex=0,this.updateHighlightedItem()):this._highlightedIndex=-1}isHighlightedItem(n){const t=this.shadowRoot?.querySelectorAll("afd-country-list-item");return!(!t||this._highlightedIndex<0||this._highlightedIndex>=t.length)&&t[this._highlightedIndex]===n}applyTheme(){if(!this.shadowRoot)return;let n=this.shadowRoot.querySelector("#theme-style");n||(n=document.createElement("style"),n.id="theme-style",this.shadowRoot.appendChild(n)),n.textContent=`\n      .country-list-container {\n        background-color: ${this._themeOptions.colors.background};\n        border-color: ${this._themeOptions.colors.border};\n        font-family: ${this._themeOptions.fontFamily};\n        font-size: ${this._themeOptions.fontSize};\n        padding: ${this._themeOptions.padding.list};\n        ${this._animations?"transition: all 0.2s ease;":""}\n      }\n\n      .country-list {\n        color: ${this._themeOptions.colors.text};\n      }\n\n      .country-list-title {\n        color: ${this._themeOptions.colors.text};\n        background-color: ${this._themeOptions.colors.hoverBackground};\n        padding: ${this._themeOptions.padding.item};\n      }\n\n      .no-results {\n        color: ${this._themeOptions.colors.text};\n        padding: ${this._themeOptions.padding.item};\n      }\n\n      .loading {\n        color: ${this._themeOptions.colors.text};\n        padding: ${this._themeOptions.padding.item};\n      }\n\n      .loading-spinner {\n        border: 2px solid ${this._themeOptions.colors.hoverBackground};\n        border-top: 2px solid ${this._themeOptions.colors.focusBorder}; /* Use AFD blue from theme */\n        ${this._animations?"animation: spin 1s ease-in-out infinite;":""}\n      }\n\n      @keyframes spin {\n        to { transform: rotate(360deg); }\n      }\n\n      /* Animation for the list growing/shrinking */\n      @keyframes listGrow {\n        from { max-height: 0; opacity: 0; }\n        to { max-height: 300px; opacity: 1; }\n      }\n\n      /* Apply animations if enabled */\n      .country-list-container.animated {\n        animation: listGrow 0.3s ease-out;\n      }\n    `,this.updateCountryItems()}filterCountries(n){const t=n.toLowerCase();this._filteredCountries=t?this._countries.filter((n=>n.name.toLowerCase().includes(t)||n.iso2.toLowerCase().includes(t)||n.iso3.toLowerCase().includes(t))):[...this._countries],c(this,"country-filter",{component:this,term:n,filteredCountries:this._filteredCountries,totalCountries:this._countries.length}),this.updateCountryItems()}updateCountryItems(){const n=this.shadowRoot?.querySelector(".country-list");if(n){for(;n.firstChild;)n.removeChild(n.firstChild);if(this._isLoading||0===this._countries.length&&0===this._filteredCountries.length){const t=document.createElement("div");t.className="loading";const i=document.createElement("div");i.className="loading-spinner",t.appendChild(i);const o=document.createElement("div");return o.textContent="Loading countries...",t.appendChild(o),void n.appendChild(t)}if(this._filteredCountries.forEach(((t,i)=>{const o=document.createElement("afd-country-list-item");o.country=t,o.highlighted=i===this._highlightedIndex,o.showISO=this._showISO,o.themeOptions=this._themeOptions,o.animations=this._animations,void 0!==this._themeOptions.showFlags&&(o.showFlags=this._themeOptions.showFlags),o.onClick=this.selectCountry.bind(this),n.appendChild(o)})),0===this._filteredCountries.length){const t=document.createElement("div");t.className="no-results",t.textContent="No countries found",n.appendChild(t)}}}selectCountry(n){this._selectedCountry=n.iso2,this.updateSelectedState(),this._onSelectCallback&&this._onSelectCallback(n)}updateSelectedState(){this.shadowRoot?.querySelectorAll("afd-country-list-item")}render(){if(!this.shadowRoot)return;for(;this.shadowRoot.firstChild;)this.shadowRoot.removeChild(this.shadowRoot.firstChild);const n=document.createElement("style");n.textContent=":host {\n  display: block;\n}\n\n/* Layout styles */\n.search-container {\n  padding: 8px;\n  border-bottom: 1px solid;\n}\n\n.search-input {\n  width: 100%;\n  padding: 8px 12px;\n  box-sizing: border-box;\n}\n\n.search-input:focus {\n  outline: none;\n}\n\n.country-list-container {\n  position: absolute;\n  z-index: 1000;\n  max-height: 300px;\n  overflow-y: auto;\n}\n\n.country-list {\n  list-style: none;\n  margin: 0;\n  padding: 0;\n}\n\n.country-list-title {\n  padding: 8px 12px;\n  font-size: 12px;\n  font-weight: bold;\n}\n\n.no-results {\n  padding: 12px;\n  text-align: center;\n}\n\n/* Loading indicator styles */\n.loading {\n  padding: 12px;\n  text-align: center;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 8px;\n}\n\n.loading-spinner {\n  display: inline-block;\n  width: 20px;\n  height: 20px;\n  border: 2px solid #f3f3f3; /* Light grey border */\n  border-top: 2px solid #3498db; /* Blue border on top to create the spinner effect */\n  border-radius: 50%;\n  animation: spin 1s ease-in-out infinite;\n}\n\n@keyframes spin {\n  to {\n    transform: rotate(360deg);\n  }\n}\n",this.shadowRoot.appendChild(n);const t=document.createElement("div");t.className="country-list-container",this._animations&&t.classList.add("animated");const i=document.createElement("div");i.className="country-list",t.appendChild(i),this.shadowRoot.appendChild(t),this.updateCountryItems(),this.applyTheme()}}customElements.define("afd-country-list",_)})();
//# sourceMappingURL=afd.country.1.0.0.js.map